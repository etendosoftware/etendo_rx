# Dynamic DAS – Docker Image v1.1.0

## Description

### 1. Stack

- **Image base:** `amazoncorretto:17.0.14-alpine3.21` ([link](https://github.com/corretto/corretto-docker/tree/main/17/jdk/alpine/3.21))
- **JDK Version:** 17.0.14  
- **Gradle Version:** 8.12.1  
- **OpenTelemetry Version:** v2.18.1 ([release](https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/tag/v2.18.1))  
- **Package manager:** `apk` (Alpine Package Keeper)  
- **Additional tools installed:** `wget`, `unzip`

---

## 2. Ports

| Port   | Description               |
|--------|---------------------------|
| `5021` | DAS service port          |
| `8092` | Remote debug port         |

---

## 3. Environment Variables

| Name                                                        | Description                                                                                              | Type     | Allowed Values                                                      | Default                                      | Notes                                                                                                                                                        |
|-------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|----------|---------------------------------------------------------------------|----------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `DEPENDENCIES`                                              | Maven GAV coordinates for dynamic dependencies                                                           | string   | Comma-separated list                                                | *null*                                       | —                                                                                                                                                            |
| `REPO_URL`                                                  | Maven repository URL                                                                                     | URL      | Any valid URL                                                       | `https://repo.maven.apache.org/maven2/`     | —                                                                                                                                                            |
| `REPO_USER`                                                 | Username for Maven repository                                                                            | string   | —                                                                   | *null*                                       | —                                                                                                                                                            |
| `REPO_PASSWORD`                                             | Password for Maven repository                                                                            | string   | —                                                                   | *null*                                       | —                                                                                                                                                            |
| `CONFIG_SERVER_URL`                                         | Spring Cloud Config Server URL                                                                           | URL      | Any valid URL                                                       | `http://localhost:8888`                     | —                                                                                                                                                            |
| `TASK`                                                      | Task to execute                                                                                          | enum     | `downloadJar`, `run`                                                | `downloadJar`                                | —                                                                                                                                                            |
| `DB_HOST`                                                   | Hostname for the database                                                                                | string   | —                                                                   | `db`                                         | —                                                                                                                                                            |
| `DB_PORT`                                                   | Port for the database connection                                                                         | integer  | Any valid port                                                      | `5432`                                       | —                                                                                                                                                            |
| `DB_SID`                                                    | Database SID                                                                                             | string   | —                                                                   | `etendo`                                     | —                                                                                                                                                            |
| `DEBUG_PORT`                                                | Remote debug port                                                                                        | integer  | Any valid port                                                      | `5021`                                       | —                                                                                                                                                            |
| `ENABLE_OPEN_TELEMETRY`                                     | Enables OpenTelemetry instrumentation                                                                    | boolean  | `true`, `false`                                                     | `false`                                      | —                                                                                                                                                            |
| `OTEL_SERVICE_NAME`                                         | Service name for OpenTelemetry                                                                           | string   | Any string                                                          | `das`                                        | —                                                                                                                                                            |
| `OTEL_EXPORTER_OTLP_ENDPOINT`                               | Base OTLP endpoint URL                                                                                   | string   | Any URL                                                             | `http://jaeger:4318`                         | Automatically appends `/v1/traces\|metrics\|logs}` depending on the signal type                                                                             |
| `OTEL_EXPORTER_OTLP_PROTOCOL`                               | Transport protocol for OTLP                                                                              | enum     | `grpc`, `http/protobuf`, `http/json`                                | `http/protobuf`                              | —                                                                                                                                                            |
| `OTEL_METRICS_EXPORTER`                                     | Metrics exporter                                                                                         | enum     | `otlp`, `prometheus`, `console`, `logging`, `none`                  | `none`                                       | —                                                                                                                                                            |
| `OTEL_LOGS_EXPORTER`                                        | Logs exporter                                                                                            | enum     | `otlp`, `console`, `logging`, `none`                                | `none`                                       | —                                                                                                                                                            |
| `OTEL_TRACES_EXPORTER`                                      | Traces exporter                                                                                          | enum     | `otlp`, `zipkin`, `console`, `logging`, `none`                      | `otlp`                                       | —                                                                                                                                                            |
| `OTEL_EXPORTER_OTLP_TIMEOUT`                                | Timeout (ms) for OTLP data export (traces, metrics, logs)                                                | integer  | Any positive number                                                 | `10000`                                      | —                                                                                                                                                            |
| `SPRING_PROFILES_ACTIVE`                                    | Active Spring profiles                                                                                   | string   | Comma-separated list                                                | *null*                                       | Example: `prod,dev`                                                                                                                                         |
| `SPRING_CLOUD_CONFIG_SERVER_NATIVE_SEARCHLOCATIONS`         | Native search paths for Spring Config Server                                                             | string   | Comma-separated file paths                                          | *null*                                       | Example: `file:///config,classpath:/defaults`                                                                                                               |
| `DISABLE_DEBUG`                                             | Disable JVM debug agent                                                                                  | boolean  | `true`, `false`                                                     | `false`                                      | If `true`, adds `-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:${DEBUG_PORT}`. `dt_socket`: The transport mechanism—i.e., a TCP socket—used for the debug connection. `server=y` tells the JVM to act as the debug server (waiting for a debugger to connect). `suspend=n` means “don’t pause at startup”—the app will run immediately, and you can attach the debugger at any time. (If you set suspend=y, the JVM will pause on the first line until a debugger attaches.)                                                                |
| `JAVA_OPTS`                                                 | Additional JVM options                                                                                   | string   | Any valid JVM option                                                | *null*                                       | Example: `-Dfile.encoding=UTF-8`                                                                                                                             |
| `GRADLE_FLAGS`                                              | Gradle command flags                                                                                     | string   | Any valid Gradle flags                                              | `-no-daemon --info --refresh-dependencies`   | —                                                                                                                                                            |

---

# Dynamic Gradle – Docker Image v1.1.0

## Description

### 1. Stack

- **Image base:** `amazoncorretto:17.0.14-alpine3.21` ([link](https://github.com/corretto/corretto-docker/tree/main/17/jdk/alpine/3.21))
- **JDK Version:** 17.0.14  
- **Gradle Version:** 8.12.1  
- **OpenTelemetry Version:** v2.18.1 ([release](https://github.com/open-telemetry/opentelemetry-java-instrumentation/releases/tag/v2.18.1))  
- **Package manager:** `apk` (Alpine Package Keeper)  
- **Additional tools installed:** `wget`, `unzip`

---

## 2. Ports

| Port   | Description                              |
|--------|------------------------------------------|
| `8888` | Config service port                      |
| `5020` | Config service remote debug port         |
| `8094` | Auth service port                        |
| `5022` | Auth service remote debug port           |
| `8096` | Edge service port                        |
| `5023` | Edge service remote debug port           |
| `8099` | Asyncprocess service port                |
| `5024` | Asyncprocess service remote debug port   |
| `8101` | Obconnsrv service port                   |
| `5025` | Obconnsrv service remote debug port      |
| `8102` | Worker service port                      |
| `5026` | Worker service remote debug port         |

---

## 3. Environment Variables

| Name                                                        | Description                                                                                              | Type     | Allowed Values                                                      | Default                                      | Notes                                                                                                                                                        |
|-------------------------------------------------------------|----------------------------------------------------------------------------------------------------------|----------|---------------------------------------------------------------------|----------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `DEPENDENCIES`                                              | Maven GAV coordinates for dynamic dependencies                                                           | string   | Comma-separated list                                                | *null*                                       | —                                                                                                                                                            |
| `REPO_URL`                                                  | Maven repository URL                                                                                     | URL      | Any valid URL                                                       | `https://repo.maven.apache.org/maven2/`     | —                                                                                                                                                            |
| `REPO_USER`                                                 | Username for Maven repository                                                                            | string   | —                                                                   | *null*                                       | —                                                                                                                                                            |
| `REPO_PASSWORD`                                             | Password for Maven repository                                                                            | string   | —                                                                   | *null*                                       | —                                                                                                                                                            |
| `CONFIG_SERVER_URL`                                         | Spring Cloud Config Server URL                                                                           | URL      | Any valid URL                                                       | `http://localhost:8888`                     | —                                                                                                                                                            |
| `TASK`                                                      | Task to execute                                                                                          | enum     | `downloadJar`, `run`                                                | `run`                                | —                                                                                                                                                            |
| `DEBUG_PORT`                                                | Remote debug port                                                                                        | integer  | Any valid port                                                      | `5005`                                       | —                                                                                                                                                            |
| `ENABLE_OPEN_TELEMETRY`                                     | Enables OpenTelemetry instrumentation                                                                    | boolean  | `true`, `false`                                                     | `false`                                      | —                                                                                                                                                            |
| `OTEL_SERVICE_NAME`                                         | Service name for OpenTelemetry                                                                           | string   | Any string                                                          | `dynamic-gradle`                                        | —                                                                                                                                                            |
| `OTEL_EXPORTER_OTLP_ENDPOINT`                               | Base OTLP endpoint URL                                                                                   | string   | Any URL                                                             | `http://jaeger:4318`                         | Automatically appends `/v1/traces\|metrics\|logs}` depending on the signal type                                                                             |
| `OTEL_EXPORTER_OTLP_PROTOCOL`                               | Transport protocol for OTLP                                                                              | enum     | `grpc`, `http/protobuf`, `http/json`                                | `http/protobuf`                              | —                                                                                                                                                            |
| `OTEL_METRICS_EXPORTER`                                     | Metrics exporter                                                                                         | enum     | `otlp`, `prometheus`, `console`, `logging`, `none`                  | `none`                                       | —                                                                                                                                                            |
| `OTEL_LOGS_EXPORTER`                                        | Logs exporter                                                                                            | enum     | `otlp`, `console`, `logging`, `none`                                | `none`                                       | —                                                                                                                                                            |
| `OTEL_TRACES_EXPORTER`                                      | Traces exporter                                                                                          | enum     | `otlp`, `zipkin`, `console`, `logging`, `none`                      | `otlp`                                       | —                                                                                                                                                            |
| `OTEL_EXPORTER_OTLP_TIMEOUT`                                | Timeout (ms) for OTLP data export (traces, metrics, logs)                                                | integer  | Any positive number                                                 | `10000`                                      | —                                                                                                                                                            |
| `SPRING_PROFILES_ACTIVE`                                    | Active Spring profiles                                                                                   | string   | Comma-separated list                                                | *null*                                       | Example: `prod,dev`                                                                                                                                         |
| `SPRING_CLOUD_CONFIG_SERVER_NATIVE_SEARCHLOCATIONS`         | Native search paths for Spring Config Server                                                             | string   | Comma-separated file paths                                          | *null*                                       | Example: `file:///config,classpath:/defaults`                                                                                                               |
| `DISABLE_DEBUG`                                             | Disable JVM debug agent                                                                                  | boolean  | `true`, `false`                                                     | `false`                                      | If `true`, adds `-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:${DEBUG_PORT}`. `dt_socket`: The transport mechanism—i.e., a TCP socket—used for the debug connection. `server=y` tells the JVM to act as the debug server (waiting for a debugger to connect). `suspend=n` means “don’t pause at startup”—the app will run immediately, and you can attach the debugger at any time. (If you set suspend=y, the JVM will pause on the first line until a debugger attaches.)                                                                |
| `JAVA_OPTS`                                                 | Additional JVM options                                                                                   | string   | Any valid JVM option                                                | *null*                                       | Example: `-Dfile.encoding=UTF-8`                                                                                                                             |
| `GRADLE_FLAGS`                                              | Gradle command flags                                                                                     | string   | Any valid Gradle flags                                              | `-no-daemon --info --refresh-dependencies`   | —                                                                                                                                                            |

---